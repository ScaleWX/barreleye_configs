#!/bin/sh
influx -execute 'CREATE CONTINUOUS QUERY "cq_exp_ost_stats_bytes-exp_client-fs_name-optype" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_exp_ost_stats_bytes-exp_client-fs_name-optype"  FROM "exp_ost_stats_bytes" GROUP BY time(4m), exp_client, fs_name, optype END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_mdt_jobstats_samples-fs_name-gid" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_mdt_jobstats_samples-fs_name-gid"  FROM "mdt_jobstats_samples" GROUP BY time(4m), fs_name, gid END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_mdt_jobstats_samples-fs_name-job_id" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_mdt_jobstats_samples-fs_name-job_id"  FROM "mdt_jobstats_samples" GROUP BY time(4m), fs_name, job_id END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_mdt_jobstats_samples-fs_name-uid" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_mdt_jobstats_samples-fs_name-uid"  FROM "mdt_jobstats_samples" GROUP BY time(4m), fs_name, uid END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_brw_stats_rpc_bulk_samples-field-fs_name-size" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_brw_stats_rpc_bulk_samples-field-fs_name-size"  FROM "ost_brw_stats_rpc_bulk_samples" GROUP BY time(4m), "field", fs_name, size END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_jobstats_bytes-fs_name-gid" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_jobstats_bytes-fs_name-gid"  FROM "ost_jobstats_bytes" GROUP BY time(4m), fs_name, gid END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_jobstats_bytes-fs_name-gid-optype" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_jobstats_bytes-fs_name-gid-optype"  FROM "ost_jobstats_bytes" GROUP BY time(4m), fs_name, gid, optype END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_jobstats_bytes-fs_name-job_id" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_jobstats_bytes-fs_name-job_id"  FROM "ost_jobstats_bytes" GROUP BY time(4m), fs_name, job_id END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_jobstats_bytes-fs_name-job_id-optype" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_jobstats_bytes-fs_name-job_id-optype"  FROM "ost_jobstats_bytes" GROUP BY time(4m), fs_name, job_id, optype END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_jobstats_bytes-fs_name-job_id-ost_index" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_jobstats_bytes-fs_name-job_id-ost_index"  FROM "ost_jobstats_bytes" GROUP BY time(4m), fs_name, job_id, ost_index END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_jobstats_bytes-fs_name-optype-uid" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_jobstats_bytes-fs_name-optype-uid"  FROM "ost_jobstats_bytes" GROUP BY time(4m), fs_name, optype, uid END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_jobstats_bytes-fs_name-uid" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_jobstats_bytes-fs_name-uid"  FROM "ost_jobstats_bytes" GROUP BY time(4m), fs_name, uid END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_stats_bytes-fs_name-ost_index" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_stats_bytes-fs_name-ost_index"  FROM "ost_stats_bytes" GROUP BY time(4m), fs_name, ost_index END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_stats_bytes-optype-fs_name" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_stats_bytes-optype-fs_name"  FROM "ost_stats_bytes" GROUP BY time(4m), optype, fs_name END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_stats_bytes-fqdn-fs_name" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_stats_bytes-fqdn-fs_name"  FROM "ost_stats_bytes" GROUP BY time(4m), fqdn, fs_name END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_stats_bytes-fqdn-fs_name-optype" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_stats_bytes-fqdn-fs_name-optype"  FROM "ost_stats_bytes" GROUP BY time(4m), fqdn, fs_name, optype END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_md_stats-optype-fs_name" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_md_stats-optype-fs_name"  FROM "md_stats" GROUP BY time(4m), optype, fs_name END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_exp_md_stats-mdt_exp_client-fs_name" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_exp_md_stats-mdt_exp_client-fs_name"  FROM "exp_md_stats" GROUP BY time(4m), mdt_exp_client, fs_name END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_exp_md_stats" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_exp_md_stats"  FROM "exp_md_stats" GROUP BY time(4m) END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_acctgroup_samples" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_acctgroup_samples"  FROM "ost_acctgroup_samples" GROUP BY time(4m) END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_acctuser_samples" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_acctuser_samples"  FROM "ost_acctuser_samples" GROUP BY time(4m) END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_mdt_acctgroup_samples" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_mdt_acctgroup_samples"  FROM "mdt_acctgroup_samples" GROUP BY time(4m) END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_mdt_acctuser_samples" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_mdt_acctuser_samples"  FROM "mdt_acctuser_samples" GROUP BY time(4m) END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_md_stats-fs_name" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_md_stats-fs_name"  FROM "md_stats" GROUP BY time(4m), fs_name END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_md_stats-fs_name-mdt_index" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_md_stats-fs_name-mdt_index"  FROM "md_stats" GROUP BY time(4m), fs_name, mdt_index END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_md_stats-fs_name-optype" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_md_stats-fs_name-optype"  FROM "md_stats" GROUP BY time(4m), fs_name, optype END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_mdt_acctgroup_samples-fs_name-group_id-optype" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_mdt_acctgroup_samples-fs_name-group_id-optype"  FROM "mdt_acctgroup_samples" GROUP BY time(4m), fs_name, group_id, optype END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_mdt_acctuser_samples-fs_name-optype-user_id" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_mdt_acctuser_samples-fs_name-optype-user_id"  FROM "mdt_acctgroup_samples" GROUP BY time(4m), fs_name, optype, user_id END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_mdt_filesinfo_free-fs_name" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_mdt_filesinfo_free-fs_name"  FROM "mdt_acctgroup_samples" GROUP BY time(4m), fs_name END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_mdt_filesinfo_used-fs_name" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_mdt_filesinfo_used-fs_name"  FROM "mdt_acctgroup_samples" GROUP BY time(4m), fs_name END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_acctgroup_samples-fs_name-group_id-optype" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_acctgroup_samples-fs_name-group_id-optype"  FROM "ost_acctgroup_samples" GROUP BY time(4m), fs_name, group_id, optype END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_acctuser_samples-fs_name-optype-user_id" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_acctuser_samples-fs_name-optype-user_id"  FROM "ost_acctgroup_samples" GROUP BY time(4m), fs_name, optype, user_id END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_brw_stats_block_discontiguous_rpc_samples-field-fs_name-size" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_brw_stats_block_discontiguous_rpc_samples-field-fs_name-size"  FROM "ost_brw_stats_block_discontiguous_rpc_samples" GROUP BY time(4m), "field", fs_name, size END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_brw_stats_fragmented_io_samples-field-fs_name-size" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_brw_stats_fragmented_io_samples-field-fs_name-size"  FROM "ost_brw_stats_fragmented_io_samples" GROUP BY time(4m), "field", fs_name, size END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_brw_stats_io_in_flight_samples-field-fs_name-size" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_brw_stats_io_in_flight_samples-field-fs_name-size"  FROM "ost_brw_stats_io_in_flight_samples" GROUP BY time(4m), "field", fs_name, size END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_brw_stats_io_size_samples-field-fs_name-size" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_brw_stats_io_size_samples-field-fs_name-size"  FROM "ost_brw_stats_io_size_samples" GROUP BY time(4m), "field", fs_name, size END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_brw_stats_io_time_samples-field-fs_name-size" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_brw_stats_io_time_samples-field-fs_name-size"  FROM "ost_brw_stats_io_time_samples" GROUP BY time(4m), "field", fs_name, size END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_brw_stats_page_discontiguous_rpc_samples-field-fs_name-size" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_brw_stats_page_discontiguous_rpc_samples-field-fs_name-size"  FROM "ost_brw_stats_page_discontiguous_rpc_samples" GROUP BY time(4m), "field", fs_name, size END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_jobstats_bytes" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_jobstats_bytes"  FROM "ost_jobstats_bytes" GROUP BY time(4m) END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_kbytesinfo_free-fs_name" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_kbytesinfo_free-fs_name"  FROM "ost_acctgroup_samples" GROUP BY time(4m), fs_name END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_kbytesinfo_used-fs_name" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_kbytesinfo_used-fs_name"  FROM "ost_acctgroup_samples" GROUP BY time(4m), fs_name END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_stats_bytes-fs_name-optype" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_stats_bytes-fs_name-optype"  FROM "ost_stats_bytes" GROUP BY time(4m), fs_name, optype END'
influx -execute 'CREATE CONTINUOUS QUERY "cq_ost_stats_bytes-fs_name-optype-ost_index" ON "'$1'" BEGIN SELECT sum("value") / 4 INTO "cqm_ost_stats_bytes-fs_name-optype-ost_index"  FROM "ost_stats_bytes" GROUP BY time(4m), fs_name, optype, ost_index END'